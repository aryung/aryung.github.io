<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>kubernetes terraform helm 起手式 | AC分享小站</title><meta name=keywords content="kubernetes,terraform,helm"><meta name=description content="楔子 現在雲端化的產品服務這麼多，怎一開始入門來使用這些服務，這次來聊聊這個話題吧。
觀念 主要有幾個東西:
 kubernetes:負責 app 的擴展，穩定服務等等 helm:負責產生 kubernetes 的設定參數樣版文件 terraform:負責來設定雲端的資源環境 為了不讓東西討論到細節，就先簡單把 kubernetes 想像成可以使用的程式，而 helm 就想像成去設定程式的一些參數，而 terraform 想像成要用哪些資源。  當然可以去花點時間去官網看看詳細的介紹。
環境 為了在本地端使用開發測試，就本地安裝 minikube 來替代 kubernetes ，再簡化說明， helm 就是這些設定 kubernetes 的相關設定，至於 terraform 就當做設定這些程式所需要的相關資源(eg.多大的 cpu 和 ram)
示範 code 使用 terraform + kubernetes config terraform 要設定幾個東西
 kubernetes mysql deployment & mysql service wordpress deployment & wordpress service  provider &#34;kubernetes&#34; {  config_context = &#34;minikube&#34; }  locals {  wordpress_labels = {  App = &#34;wordpress&#34;  Tier = &#34;frontend&#34;  }  mysql_labels = {  App = &#34;wordpress&#34;  Tier = &#34;mysql&#34;  } } resource &#34;kubernetes_secret&#34; &#34;mysql-pass&#34; {  metadata {  name = &#34;mysql-pass&#34;  } data = {  password = &#34;root&#34;  } } resource &#34;kubernetes_deployment&#34; &#34;wordpress&#34; {  metadata {  name = &#34;wordpress&#34;  labels = local."><meta name=author content><link rel=canonical href=https://aryung.github.io/posts/2022-04-28-kubernetes-terraform-helm/><link crossorigin=anonymous href=/assets/css/stylesheet.min.b4e19c453811e60acfec1f00c15ac2be1c53f6ab90187e684358ce7faaf48bab.css integrity="sha256-tOGcRTgR5grP7B8AwVrCvhxT9quQGH5oQ1jOf6r0i6s=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.2840b7fccd34145847db71a290569594bdbdb00047097f75d6495d162f5d7dff.js integrity="sha256-KEC3/M00FFhH23GikFaVlL29sABHCX911kldFi9dff8=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://aryung.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://aryung.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://aryung.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://aryung.github.io/apple-touch-icon.png><link rel=mask-icon href=https://aryung.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="kubernetes terraform helm 起手式"><meta property="og:description" content="楔子 現在雲端化的產品服務這麼多，怎一開始入門來使用這些服務，這次來聊聊這個話題吧。
觀念 主要有幾個東西:
 kubernetes:負責 app 的擴展，穩定服務等等 helm:負責產生 kubernetes 的設定參數樣版文件 terraform:負責來設定雲端的資源環境 為了不讓東西討論到細節，就先簡單把 kubernetes 想像成可以使用的程式，而 helm 就想像成去設定程式的一些參數，而 terraform 想像成要用哪些資源。  當然可以去花點時間去官網看看詳細的介紹。
環境 為了在本地端使用開發測試，就本地安裝 minikube 來替代 kubernetes ，再簡化說明， helm 就是這些設定 kubernetes 的相關設定，至於 terraform 就當做設定這些程式所需要的相關資源(eg.多大的 cpu 和 ram)
示範 code 使用 terraform + kubernetes config terraform 要設定幾個東西
 kubernetes mysql deployment & mysql service wordpress deployment & wordpress service  provider &#34;kubernetes&#34; {  config_context = &#34;minikube&#34; }  locals {  wordpress_labels = {  App = &#34;wordpress&#34;  Tier = &#34;frontend&#34;  }  mysql_labels = {  App = &#34;wordpress&#34;  Tier = &#34;mysql&#34;  } } resource &#34;kubernetes_secret&#34; &#34;mysql-pass&#34; {  metadata {  name = &#34;mysql-pass&#34;  } data = {  password = &#34;root&#34;  } } resource &#34;kubernetes_deployment&#34; &#34;wordpress&#34; {  metadata {  name = &#34;wordpress&#34;  labels = local."><meta property="og:type" content="article"><meta property="og:url" content="https://aryung.github.io/posts/2022-04-28-kubernetes-terraform-helm/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-28T18:29:06+08:00"><meta property="article:modified_time" content="2022-04-28T18:29:06+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="kubernetes terraform helm 起手式"><meta name=twitter:description content="楔子 現在雲端化的產品服務這麼多，怎一開始入門來使用這些服務，這次來聊聊這個話題吧。
觀念 主要有幾個東西:
 kubernetes:負責 app 的擴展，穩定服務等等 helm:負責產生 kubernetes 的設定參數樣版文件 terraform:負責來設定雲端的資源環境 為了不讓東西討論到細節，就先簡單把 kubernetes 想像成可以使用的程式，而 helm 就想像成去設定程式的一些參數，而 terraform 想像成要用哪些資源。  當然可以去花點時間去官網看看詳細的介紹。
環境 為了在本地端使用開發測試，就本地安裝 minikube 來替代 kubernetes ，再簡化說明， helm 就是這些設定 kubernetes 的相關設定，至於 terraform 就當做設定這些程式所需要的相關資源(eg.多大的 cpu 和 ram)
示範 code 使用 terraform + kubernetes config terraform 要設定幾個東西
 kubernetes mysql deployment & mysql service wordpress deployment & wordpress service  provider &#34;kubernetes&#34; {  config_context = &#34;minikube&#34; }  locals {  wordpress_labels = {  App = &#34;wordpress&#34;  Tier = &#34;frontend&#34;  }  mysql_labels = {  App = &#34;wordpress&#34;  Tier = &#34;mysql&#34;  } } resource &#34;kubernetes_secret&#34; &#34;mysql-pass&#34; {  metadata {  name = &#34;mysql-pass&#34;  } data = {  password = &#34;root&#34;  } } resource &#34;kubernetes_deployment&#34; &#34;wordpress&#34; {  metadata {  name = &#34;wordpress&#34;  labels = local."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://aryung.github.io/posts/"},{"@type":"ListItem","position":2,"name":"kubernetes terraform helm 起手式","item":"https://aryung.github.io/posts/2022-04-28-kubernetes-terraform-helm/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"kubernetes terraform helm 起手式","name":"kubernetes terraform helm 起手式","description":"楔子 現在雲端化的產品服務這麼多，怎一開始入門來使用這些服務，這次來聊聊這個話題吧。\n觀念 主要有幾個東西:\n kubernetes:負責 app 的擴展，穩定服務等等 helm:負責產生 kubernetes 的設定參數樣版文件 terraform:負責來設定雲端的資源環境 為了不讓東西討論到細節，就先簡單把 kubernetes 想像成可以使用的程式，而 helm 就想像成去設定程式的一些參數，而 terraform 想像成要用哪些資源。  當然可以去花點時間去官網看看詳細的介紹。\n環境 為了在本地端使用開發測試，就本地安裝 minikube 來替代 kubernetes ，再簡化說明， helm 就是這些設定 kubernetes 的相關設定，至於 terraform 就當做設定這些程式所需要的相關資源(eg.多大的 cpu 和 ram)\n示範 code 使用 terraform + kubernetes config terraform 要設定幾個東西\n kubernetes mysql deployment \u0026amp; mysql service wordpress deployment \u0026amp; wordpress service  provider \u0026#34;kubernetes\u0026#34; {  config_context = \u0026#34;minikube\u0026#34; }  locals {  wordpress_labels = {  App = \u0026#34;wordpress\u0026#34;  Tier = \u0026#34;frontend\u0026#34;  }  mysql_labels = {  App = \u0026#34;wordpress\u0026#34;  Tier = \u0026#34;mysql\u0026#34;  } } resource \u0026#34;kubernetes_secret\u0026#34; \u0026#34;mysql-pass\u0026#34; {  metadata {  name = \u0026#34;mysql-pass\u0026#34;  } data = {  password = \u0026#34;root\u0026#34;  } } resource \u0026#34;kubernetes_deployment\u0026#34; \u0026#34;wordpress\u0026#34; {  metadata {  name = \u0026#34;wordpress\u0026#34;  labels = local.","keywords":["kubernetes","terraform","helm"],"articleBody":"楔子 現在雲端化的產品服務這麼多，怎一開始入門來使用這些服務，這次來聊聊這個話題吧。\n觀念 主要有幾個東西:\n kubernetes:負責 app 的擴展，穩定服務等等 helm:負責產生 kubernetes 的設定參數樣版文件 terraform:負責來設定雲端的資源環境 為了不讓東西討論到細節，就先簡單把 kubernetes 想像成可以使用的程式，而 helm 就想像成去設定程式的一些參數，而 terraform 想像成要用哪些資源。  當然可以去花點時間去官網看看詳細的介紹。\n環境 為了在本地端使用開發測試，就本地安裝 minikube 來替代 kubernetes ，再簡化說明， helm 就是這些設定 kubernetes 的相關設定，至於 terraform 就當做設定這些程式所需要的相關資源(eg.多大的 cpu 和 ram)\n示範 code 使用 terraform + kubernetes config terraform 要設定幾個東西\n kubernetes mysql deployment \u0026 mysql service wordpress deployment \u0026 wordpress service  provider \"kubernetes\" {  config_context = \"minikube\" }  locals {  wordpress_labels = {  App = \"wordpress\"  Tier = \"frontend\"  }  mysql_labels = {  App = \"wordpress\"  Tier = \"mysql\"  } } resource \"kubernetes_secret\" \"mysql-pass\" {  metadata {  name = \"mysql-pass\"  } data = {  password = \"root\"  } } resource \"kubernetes_deployment\" \"wordpress\" {  metadata {  name = \"wordpress\"  labels = local.wordpress_labels  }  spec {  replicas = 1  selector {  match_labels = local.wordpress_labels  }  template {  metadata {  labels = local.wordpress_labels  }  spec {  container {  image = \"wordpress:4.8-apache\"  name = \"wordpress\"  port {  container_port = 80  }  env {  name = \"WORDPRESS_DB_HOST\"  value = \"mysql-service\"  }  env {  name = \"WORDPRESS_DB_PASSWORD\"  value_from {  secret_key_ref {  name = \"mysql-pass\"  key = \"password\"  }  }  }  }  }  }  } } resource \"kubernetes_service\" \"wordpress-service\" {  metadata {  name = \"wordpress-service\"  }  spec {  selector = local.wordpress_labels  port {  port = 80  target_port = 80  node_port = 32000  }  type = \"NodePort\"  } } resource \"kubernetes_deployment\" \"mysql\" {  metadata {  name = \"mysql\"  labels = local.mysql_labels  }  spec {  replicas = 1  selector {  match_labels = local.mysql_labels  }  template {  metadata {  labels = local.mysql_labels  }  spec {  container {  image = \"mysql:5.6\"  name = \"mysql\"  port {  container_port = 3306  }  env {  name = \"MYSQL_ROOT_PASSWORD\"  value_from {  secret_key_ref {  name = \"mysql-pass\"  key = \"password\"  }  }  }  }  }  }  } } resource \"kubernetes_service\" \"mysql-service\" {  metadata {  name = \"mysql-service\"  }  spec {  selector = local.mysql_labels  port {  port = 3306  target_port = 3306  }  type = \"NodePort\"  } } 使用 terraform + helm terraform 設定的東西和上面一致，但多了 helm 就可以更簡單了\n terraform config  provider \"helm\" {  kubernetes {  config_context = \"minikube\"  } } resource \"helm_release\" \"mysql\" {  name = \"mysql\"  chart = \"${abspath(path.root)}/charts/mysql-chart\" } resource \"helm_release\" \"wordpress\" {  name = \"wordpress\"  chart = \"${abspath(path.root)}/charts/wordpress-chart\" }  helm mysql deployment \u0026 helm mysql service \u0026 helm values  helm create mysql-chart\nvalues\nreplicaCount: 1 image:  repository: mysql:5.6  pullPolicy: IfNotPresent deployment:  name: mysql-deployment service:  name: mysql-service  type: ClusterIP  port: 3306 deployment\napiVersion: apps/v1 kind: Deployment metadata:  name: {{ .Values.deployment.name }}  labels:  {{- include \"mysql-chart.labels\" . | nindent 4 }} spec:  replicas: {{ .Values.replicaCount }}  selector:  matchLabels:  {{- include \"mysql-chart.selectorLabels\" . | nindent 6 }}  template:  metadata:  labels:  {{- include \"mysql-chart.selectorLabels\" . | nindent 8 }}  spec:  containers:  - name: {{ .Chart.Name }}  image: \"{{ .Values.image.repository }}\"  imagePullPolicy: {{ .Values.image.pullPolicy }}  ports:  - name: http  containerPort: {{ .Values.service.port }}  protocol: TCP  env:  - name: MYSQL_ROOT_PASSWORD  value: 'admin' service\napiVersion: v1 kind: Service metadata:  name: {{ .Values.service.name }}  labels:  {{- include \"mysql-chart.labels\" . | nindent 4 }} spec:  type: {{ .Values.service.type }}  ports:  - port: {{ .Values.service.port }}  targetPort: {{ .Values.service.port }}  protocol: TCP  name: http  selector:  {{- include \"mysql-chart.selectorLabels\" . | nindent 4 }}  helm wordpress deployment \u0026 helm wordpress service \u0026 values  helm create wordpress-chart\nhelm wordpress values\nreplicaCount: 1 image:  repository: wordpress:4.8-apache  pullPolicy: IfNotPresent deployment:  name: wordpress-deployment service:  name: wordpress-service  type: NodePort  port: 80  nodePort: 32000 helm wordpress deployment\napiVersion: apps/v1 kind: Deployment metadata:  name: {{ .Values.deployment.name }}  labels:  {{- include \"wordpress-chart.labels\" . | nindent 4 }} spec:  replicas: {{ .Values.replicaCount }}  selector:  matchLabels:  {{- include \"wordpress-chart.selectorLabels\" . | nindent 6 }}  template:  metadata:  labels:  {{- include \"wordpress-chart.selectorLabels\" . | nindent 8 }}  spec:  containers:  - name: {{ .Chart.Name }}  image: {{ .Values.image.repository }}  imagePullPolicy: {{ .Values.image.pullPolicy }}  ports:  - name: http  containerPort: {{ .Values.service.port }}  protocol: TCP  env:  - name: WORDPRESS_DB_HOST  value: 'mysql-service'  - name: WORDPRESS_DB_PASSWORD  value: 'admin' helm wordpress service\napiVersion: v1 kind: Service metadata:  name: {{ .Values.service.name }}  labels:  {{- include \"wordpress-chart.labels\" . | nindent 4 }} spec:  type: {{ .Values.service.type }}  ports:  - port: {{ .Values.service.port }}  targetPort: {{ .Values.service.port }}  protocol: TCP  name: http  nodePort: {{ .Values.service.nodePort }}  selector:  {{- include \"wordpress-chart.selectorLabels\" . | nindent 4 }} ","wordCount":"680","inLanguage":"en","datePublished":"2022-04-28T18:29:06+08:00","dateModified":"2022-04-28T18:29:06+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://aryung.github.io/posts/2022-04-28-kubernetes-terraform-helm/"},"publisher":{"@type":"Organization","name":"AC分享小站","logo":{"@type":"ImageObject","url":"https://aryung.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://aryung.github.io/ accesskey=h title="AC分享小站 (Alt + H)">AC分享小站</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>kubernetes terraform helm 起手式</h1><div class=post-meta><span title="2022-04-28 18:29:06 +0800 +0800">April 28, 2022</span></div></header><div class=post-content><h1 id=楔子>楔子<a hidden class=anchor aria-hidden=true href=#楔子>#</a></h1><p>現在雲端化的產品服務這麼多，怎一開始入門來使用這些服務，這次來聊聊這個話題吧。</p><h1 id=觀念>觀念<a hidden class=anchor aria-hidden=true href=#觀念>#</a></h1><p>主要有幾個東西:</p><ul><li>kubernetes:負責 app 的擴展，穩定服務等等</li><li>helm:負責產生 kubernetes 的設定參數樣版文件</li><li>terraform:負責來設定雲端的資源環境
為了不讓東西討論到細節，就先簡單把 kubernetes 想像成可以使用的程式，而 helm 就想像成去設定程式的一些參數，而 terraform 想像成要用哪些資源。</li></ul><p>當然可以去花點時間去官網看看詳細的介紹。</p><h1 id=環境>環境<a hidden class=anchor aria-hidden=true href=#環境>#</a></h1><p>為了在本地端使用開發測試，就本地安裝 minikube 來替代 kubernetes ，再簡化說明， helm 就是這些設定 kubernetes 的相關設定，至於 terraform 就當做設定這些程式所需要的相關資源(eg.多大的 cpu 和 ram)</p><h1 id=示範-code>示範 code<a hidden class=anchor aria-hidden=true href=#示範-code>#</a></h1><h2 id=使用-terraform--kubernetes-config>使用 terraform + kubernetes config<a hidden class=anchor aria-hidden=true href=#使用-terraform--kubernetes-config>#</a></h2><p>terraform 要設定幾個東西</p><ul><li>kubernetes</li><li>mysql deployment & mysql service</li><li>wordpress deployment & wordpress service</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-terraform data-lang=terraform><span style=display:flex><span><span style=color:#66d9ef>provider</span> <span style=color:#e6db74>&#34;kubernetes&#34;</span> {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>config_context</span> = <span style=color:#e6db74>&#34;minikube&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>locals</span> {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>wordpress_labels</span> = {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>App</span> = <span style=color:#e6db74>&#34;wordpress&#34;</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>Tier</span> = <span style=color:#e6db74>&#34;frontend&#34;</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> <span style=color:#a6e22e>mysql_labels</span> = {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>App</span> = <span style=color:#e6db74>&#34;wordpress&#34;</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>Tier</span> = <span style=color:#e6db74>&#34;mysql&#34;</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>resource</span> <span style=color:#e6db74>&#34;kubernetes_secret&#34;</span> <span style=color:#e6db74>&#34;mysql-pass&#34;</span> {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>metadata</span> {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;mysql-pass&#34;</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span><span style=color:#66d9ef> data</span> <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>password</span> = <span style=color:#e6db74>&#34;root&#34;</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>resource</span> <span style=color:#e6db74>&#34;kubernetes_deployment&#34;</span> <span style=color:#e6db74>&#34;wordpress&#34;</span> {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>metadata</span> {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;wordpress&#34;</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>labels</span> = <span style=color:#a6e22e>local</span>.<span style=color:#a6e22e>wordpress_labels</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> <span style=color:#a6e22e>spec</span> {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>replicas</span> = <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>selector</span> {
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>match_labels</span> = <span style=color:#a6e22e>local</span>.<span style=color:#a6e22e>wordpress_labels</span>
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>template</span> {
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>metadata</span> {
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>labels</span> = <span style=color:#a6e22e>local</span>.<span style=color:#a6e22e>wordpress_labels</span>
</span></span><span style=display:flex><span>     }
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>spec</span> {
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>container</span> {
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>image</span> = <span style=color:#e6db74>&#34;wordpress:4.8-apache&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>name</span>  = <span style=color:#e6db74>&#34;wordpress&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>port</span> {
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>container_port</span> = <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>         }
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>env</span> {
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;WORDPRESS_DB_HOST&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>value</span> = <span style=color:#e6db74>&#34;mysql-service&#34;</span>
</span></span><span style=display:flex><span>         }
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>env</span> {
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;WORDPRESS_DB_PASSWORD&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>value_from</span> {
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>secret_key_ref</span> {
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;mysql-pass&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>key</span> = <span style=color:#e6db74>&#34;password&#34;</span>
</span></span><span style=display:flex><span>             }
</span></span><span style=display:flex><span>           }
</span></span><span style=display:flex><span>         }
</span></span><span style=display:flex><span>       }
</span></span><span style=display:flex><span>     }
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>resource</span> <span style=color:#e6db74>&#34;kubernetes_service&#34;</span> <span style=color:#e6db74>&#34;wordpress-service&#34;</span> {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>metadata</span> {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;wordpress-service&#34;</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> <span style=color:#a6e22e>spec</span> {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>selector</span> = <span style=color:#a6e22e>local</span>.<span style=color:#a6e22e>wordpress_labels</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>port</span> {
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>port</span>        = <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>target_port</span> = <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>node_port</span> = <span style=color:#ae81ff>32000</span>
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>type</span> = <span style=color:#e6db74>&#34;NodePort&#34;</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>resource</span> <span style=color:#e6db74>&#34;kubernetes_deployment&#34;</span> <span style=color:#e6db74>&#34;mysql&#34;</span> {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>metadata</span> {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;mysql&#34;</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>labels</span> = <span style=color:#a6e22e>local</span>.<span style=color:#a6e22e>mysql_labels</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> <span style=color:#a6e22e>spec</span> {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>replicas</span> = <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>selector</span> {
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>match_labels</span> = <span style=color:#a6e22e>local</span>.<span style=color:#a6e22e>mysql_labels</span>
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>template</span> {
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>metadata</span> {
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>labels</span> = <span style=color:#a6e22e>local</span>.<span style=color:#a6e22e>mysql_labels</span>
</span></span><span style=display:flex><span>     }
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>spec</span> {
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>container</span> {
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>image</span> = <span style=color:#e6db74>&#34;mysql:5.6&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>name</span>  = <span style=color:#e6db74>&#34;mysql&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>port</span> {
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>container_port</span> = <span style=color:#ae81ff>3306</span>
</span></span><span style=display:flex><span>         }
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>env</span> {
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;MYSQL_ROOT_PASSWORD&#34;</span>
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>value_from</span> {
</span></span><span style=display:flex><span>             <span style=color:#a6e22e>secret_key_ref</span> {
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;mysql-pass&#34;</span>
</span></span><span style=display:flex><span>               <span style=color:#a6e22e>key</span> = <span style=color:#e6db74>&#34;password&#34;</span>
</span></span><span style=display:flex><span>             }
</span></span><span style=display:flex><span>           }
</span></span><span style=display:flex><span>         }
</span></span><span style=display:flex><span>       }
</span></span><span style=display:flex><span>     }
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>resource</span> <span style=color:#e6db74>&#34;kubernetes_service&#34;</span> <span style=color:#e6db74>&#34;mysql-service&#34;</span> {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>metadata</span> {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;mysql-service&#34;</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> <span style=color:#a6e22e>spec</span> {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>selector</span> = <span style=color:#a6e22e>local</span>.<span style=color:#a6e22e>mysql_labels</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>port</span> {
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>port</span>        = <span style=color:#ae81ff>3306</span>
</span></span><span style=display:flex><span>     <span style=color:#a6e22e>target_port</span> = <span style=color:#ae81ff>3306</span>
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>type</span> = <span style=color:#e6db74>&#34;NodePort&#34;</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=使用-terraform---helm>使用 terraform + helm<a hidden class=anchor aria-hidden=true href=#使用-terraform---helm>#</a></h2><p>terraform 設定的東西和上面一致，但多了 helm 就可以更簡單了</p><ul><li>terraform config</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-terraform data-lang=terraform><span style=display:flex><span><span style=color:#66d9ef>provider</span> <span style=color:#e6db74>&#34;helm&#34;</span> {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>kubernetes</span> {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>config_context</span> = <span style=color:#e6db74>&#34;minikube&#34;</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>resource</span> <span style=color:#e6db74>&#34;helm_release&#34;</span> <span style=color:#e6db74>&#34;mysql&#34;</span> {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>name</span>  = <span style=color:#e6db74>&#34;mysql&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>chart</span> = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>abspath(<span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>root</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74>/charts/mysql-chart&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>resource</span> <span style=color:#e6db74>&#34;helm_release&#34;</span> <span style=color:#e6db74>&#34;wordpress&#34;</span> {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>name</span>  = <span style=color:#e6db74>&#34;wordpress&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>chart</span> = <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>abspath(<span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>root</span>)<span style=color:#e6db74>}</span><span style=color:#e6db74>/charts/wordpress-chart&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><ul><li>helm mysql deployment & helm mysql service & helm values</li></ul><p><code>helm create mysql-chart</code></p><p>values</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>replicaCount</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>image</span>:
</span></span><span style=display:flex><span> <span style=color:#f92672>repository</span>: <span style=color:#ae81ff>mysql:5.6</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>pullPolicy</span>: <span style=color:#ae81ff>IfNotPresent</span>
</span></span><span style=display:flex><span><span style=color:#f92672>deployment</span>:
</span></span><span style=display:flex><span> <span style=color:#f92672>name</span>: <span style=color:#ae81ff>mysql-deployment</span>
</span></span><span style=display:flex><span><span style=color:#f92672>service</span>:
</span></span><span style=display:flex><span> <span style=color:#f92672>name</span>: <span style=color:#ae81ff>mysql-service</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>type</span>: <span style=color:#ae81ff>ClusterIP</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>port</span>: <span style=color:#ae81ff>3306</span>
</span></span></code></pre></div><p>deployment</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Deployment</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span> <span style=color:#f92672>name</span>: {{ <span style=color:#ae81ff>.Values.deployment.name }}</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>   {{- <span style=color:#ae81ff>include &#34;mysql-chart.labels&#34; . | nindent 4 }}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span> <span style=color:#f92672>replicas</span>: {{ <span style=color:#ae81ff>.Values.replicaCount }}</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>   <span style=color:#f92672>matchLabels</span>:
</span></span><span style=display:flex><span>     {{- <span style=color:#ae81ff>include &#34;mysql-chart.selectorLabels&#34; . | nindent 6 }}</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>template</span>:
</span></span><span style=display:flex><span>   <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>     <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>       {{- <span style=color:#ae81ff>include &#34;mysql-chart.selectorLabels&#34; . | nindent 8 }}</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>     <span style=color:#f92672>containers</span>:
</span></span><span style=display:flex><span>       - <span style=color:#f92672>name</span>: {{ <span style=color:#ae81ff>.Chart.Name }}</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>image</span>: <span style=color:#e6db74>&#34;{{ .Values.image.repository }}&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>imagePullPolicy</span>: {{ <span style=color:#ae81ff>.Values.image.pullPolicy }}</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>           - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>containerPort</span>: {{ <span style=color:#ae81ff>.Values.service.port }}</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>protocol</span>: <span style=color:#ae81ff>TCP</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>           - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>MYSQL_ROOT_PASSWORD</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>value</span>: <span style=color:#e6db74>&#39;admin&#39;</span>
</span></span></code></pre></div><p>service</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Service</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span> <span style=color:#f92672>name</span>: {{ <span style=color:#ae81ff>.Values.service.name }}</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>   {{- <span style=color:#ae81ff>include &#34;mysql-chart.labels&#34; . | nindent 4 }}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span> <span style=color:#f92672>type</span>: {{ <span style=color:#ae81ff>.Values.service.type }}</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>   - <span style=color:#f92672>port</span>: {{ <span style=color:#ae81ff>.Values.service.port }}</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>targetPort</span>: {{ <span style=color:#ae81ff>.Values.service.port }}</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>protocol</span>: <span style=color:#ae81ff>TCP</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>name</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>   {{- <span style=color:#ae81ff>include &#34;mysql-chart.selectorLabels&#34; . | nindent 4 }}</span>
</span></span></code></pre></div><ul><li>helm wordpress deployment & helm wordpress service & values</li></ul><p><code>helm create wordpress-chart</code></p><p>helm wordpress values</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>replicaCount</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>image</span>:
</span></span><span style=display:flex><span> <span style=color:#f92672>repository</span>: <span style=color:#ae81ff>wordpress:4.8-apache</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>pullPolicy</span>: <span style=color:#ae81ff>IfNotPresent</span>
</span></span><span style=display:flex><span><span style=color:#f92672>deployment</span>:
</span></span><span style=display:flex><span> <span style=color:#f92672>name</span>: <span style=color:#ae81ff>wordpress-deployment</span>
</span></span><span style=display:flex><span><span style=color:#f92672>service</span>:
</span></span><span style=display:flex><span> <span style=color:#f92672>name</span>: <span style=color:#ae81ff>wordpress-service</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>type</span>: <span style=color:#ae81ff>NodePort</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>port</span>: <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>nodePort</span>: <span style=color:#ae81ff>32000</span>
</span></span></code></pre></div><p>helm wordpress deployment</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Deployment</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span> <span style=color:#f92672>name</span>: {{ <span style=color:#ae81ff>.Values.deployment.name }}</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>   {{- <span style=color:#ae81ff>include &#34;wordpress-chart.labels&#34; . | nindent 4 }}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span> <span style=color:#f92672>replicas</span>: {{ <span style=color:#ae81ff>.Values.replicaCount }}</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>   <span style=color:#f92672>matchLabels</span>:
</span></span><span style=display:flex><span>     {{- <span style=color:#ae81ff>include &#34;wordpress-chart.selectorLabels&#34; . | nindent 6 }}</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>template</span>:
</span></span><span style=display:flex><span>   <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>     <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>       {{- <span style=color:#ae81ff>include &#34;wordpress-chart.selectorLabels&#34; . | nindent 8 }}</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>     <span style=color:#f92672>containers</span>:
</span></span><span style=display:flex><span>       - <span style=color:#f92672>name</span>: {{ <span style=color:#ae81ff>.Chart.Name }}</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>image</span>: {{ <span style=color:#ae81ff>.Values.image.repository }}</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>imagePullPolicy</span>: {{ <span style=color:#ae81ff>.Values.image.pullPolicy }}</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>           - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>containerPort</span>: {{ <span style=color:#ae81ff>.Values.service.port }}</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>protocol</span>: <span style=color:#ae81ff>TCP</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>env</span>:
</span></span><span style=display:flex><span>           - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>WORDPRESS_DB_HOST</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>value</span>: <span style=color:#e6db74>&#39;mysql-service&#39;</span>
</span></span><span style=display:flex><span>           - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>WORDPRESS_DB_PASSWORD</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>value</span>: <span style=color:#e6db74>&#39;admin&#39;</span>
</span></span></code></pre></div><p>helm wordpress service</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Service</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span> <span style=color:#f92672>name</span>: {{ <span style=color:#ae81ff>.Values.service.name }}</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>   {{- <span style=color:#ae81ff>include &#34;wordpress-chart.labels&#34; . | nindent 4 }}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span> <span style=color:#f92672>type</span>: {{ <span style=color:#ae81ff>.Values.service.type }}</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>   - <span style=color:#f92672>port</span>: {{ <span style=color:#ae81ff>.Values.service.port }}</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>targetPort</span>: {{ <span style=color:#ae81ff>.Values.service.port }}</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>protocol</span>: <span style=color:#ae81ff>TCP</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>name</span>: <span style=color:#ae81ff>http</span>
</span></span><span style=display:flex><span>     <span style=color:#f92672>nodePort</span>: {{ <span style=color:#ae81ff>.Values.service.nodePort }}</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>   {{- <span style=color:#ae81ff>include &#34;wordpress-chart.selectorLabels&#34; . | nindent 4 }}</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://aryung.github.io/tags/kubernetes/>kubernetes</a></li><li><a href=https://aryung.github.io/tags/terraform/>terraform</a></li><li><a href=https://aryung.github.io/tags/helm/>helm</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://aryung.github.io/>AC分享小站</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>